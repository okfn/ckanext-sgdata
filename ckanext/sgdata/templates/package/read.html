{% ckan_extends %}

{% block package_notes %}
  {% if c.pkg_notes_formatted %}
    <div class="notes embedded-content">
      <h2>Purpose</h2>
      {{ c.pkg_notes_formatted }}
    </div>
  {% endif %}

  <div class="notes embedded-content">
    <h2>Survey / Administrative Source</h2>
    {{ pkg.administrative_source }}
  </div>

  {% if pkg.get('reference-period-start') and pkg.get('reference-period-end') %}
    <h2>Reference Period</h2>
    From {{ pkg['reference-period-start'] }} to {{ pkg['reference-period-end'] }}
  {% elif pkg.get('reference-period-start') %}
    <h2>Reference Period</h2>
    {{ pkg['reference-period-start'] }}
  {% elif pkg.get('reference-period-end') %}
    <h2>Reference Period</h2>
    {{ pkg['reference-period-end'] }}
  {% endif %}

  {% for name, title in (('type_of_data_collection', 'Type of Data Collection'),
                         ('status', 'Status'),
                         ('frequency', 'Frequency'),
                         ('security_classification', 'Security Classification'),
                         ('data_granularity', 'Data Granularity'),
                         ('publish_on_data_gov_sg', 'Publish on Data.gov.sg'),
                         ) %}
    {% if pkg.get(name) %}
      <h2>{{ title }}</h2>
        {{ pkg[name][0] }}
    {% endif %}
  {% endfor %}

  {% for name, title in (('coverage', 'Coverage'),
                         ('conditions_of_use', 'Conditions of Use'),
                         ('comments', 'Comments'),
                         ('unit_of_measure', 'Unit of Measure'),
                         ('available-from', 'Available From'),
                         ('agency_record_identifier', 'Agency Record Identifier'),
                         ('data_provider', 'Data Provider / Distributor'),
                         ('data_provider_contact_name', 'Contact Name'),
                         ('data_provider_contact_designation', 'Contact Designation'),
                         ('data_provider_contact_department', 'Contact Department'),
                         ('data_provider_contact_telephone_number', 'Contact Telephone Number'),
                         ('data_provider_contact_email_address', 'Contact Email Address'),
                         ('data_provider_alternate_contact_name', 'Alternate Contact Name'),
                         ('data_provider_alternate_contact_designation', 'Alternate Contact Designation'),
                         ('data_provider_alternate_contact_department', 'Alternate Contact Department'),
                         ('data_provider_alternate_contact_telephone_number', 'Alternate Contact Telephone Number'),
                         ('data_provider_alternate_contact_email_address', 'Alternate Contact Email Address'),
                         ('data_compiler', 'Data Compiler / Source'),
                         ('data_compiler_contact_name', 'Contact Name'),
                         ('data_compiler_contact_designation', 'Contact Designation'),
                         ('data_compiler_contact_department', 'Contact Department'),
                         ('data_compiler_contact_telephone_number', 'Contact Telephone Number'),
                         ('data_compiler_contact_email_address', 'Contact Email Address'),
                         ) %}
    {% if pkg.get(name) %}
      <h2>{{ title }}</h2>
        {{ pkg[name] }}
    {% endif %}

  {% endfor %}

  <h2>Metadata Creation Date</h2>
  {{ h.render_datetime(pkg.metadata_created) }}

  <h2>Last Metadata Update Date</h2>
  {{ h.render_datetime(pkg.metadata_modified) }}

  <h2>Last Update By</h2>
  {% set last_updater = h.last_update_by(pkg) %}
  <a href="{{ h.url_for(controller='user', action='read', id=last_updater.name) }}">{{ last_updater.display_name }}</a>

{% endblock %}
